<div class="col-md-12">
  <div class="card card-container">
    <img id="profile-img" src="//ssl.gstatic.com/accounts/ui/avatar_2x.png" alt="User icon" class="profile-img-card d-none d-sm-block" />
    <form [formGroup]="miForm" [class.is-invalid]="miForm.invalid">
      <div class="form-group">
        <label for="idUsuario">Usuario: </label>
        <input id="idUsuario" class="form-control" [class.is-invalid]="miForm.get('idUsuario')?.invalid" type="email"
          formControlName="idUsuario">
        <span class="invalid-feedback">{{getErrorMessage('idUsuario')}}</span>
      </div>
      <div class="form-group">
        <label for="nombre">Nombre: </label>
        <input id="nombre" class="form-control" [class.is-invalid]="miForm.get('nombre')?.invalid" type="text"
          formControlName="nombre" autocomplete="username">
        <span class="invalid-feedback">{{getErrorMessage('nombre')}}</span>
      </div>
      <fieldset formGroupName="password">
        <div class="form-group">
          <label for="passwordValue">Contrase침a: </label>
          <input id="passwordValue" class="form-control"
            [class.is-invalid]="miForm.get('password.passwordValue')?.invalid" type="password"
            formControlName="passwordValue" autocomplete="new-password">
          <span class="invalid-feedback">{{getErrorMessage('password.passwordValue')}}</span>
        </div>
        <div class="form-group">
          <label for="passwordConfirm">Confirme la contrase침a: </label>
          <input id="passwordConfirm" class="form-control" [class.is-invalid]="miForm.get('password')?.invalid"
            type="password" formControlName="passwordConfirm" autocomplete="new-password">
          <span class="invalid-feedback">No coincide la confirmaci칩n</span>
        </div>

      </fieldset>
      <div formArrayName="roles">
        <h4>Roles
          <button class="btn btn-info btn-sm" (click)="addRole()">A침adir Role de usuario</button>
        </h4>

        <ul *ngFor="let row of $any(miForm.get('roles')).controls; let i=index" [formGroupName]="i">
          <li>Rol #{{i + 1}}:
            <div class="input-group mb-3">
              <select class="form-select" formControlName="role" title="role">
                <option>Usuarios</option>
                <option>Administradores</option>
              </select>
              <button type="button" class="close" aria-label="Close" (click)="deleteRole(i)">
                <span aria-hidden="true">&times;</span>
              </button>{{row?.get('role')?.errors | json}}
            </div>
          </li>
        </ul>
      </div>
      <button type="button" class="btn btn-outline-primary" (click)="send()" [disabled]="miForm.invalid">Enviar</button>
    </form>
    {{ miForm.value | json }}
  </div>
</div>
